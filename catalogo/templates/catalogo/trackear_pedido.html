{% extends "base.html" %}

{% block title %}Rastrear pedido · Pure Warer{% endblock %}

{% block content %}

<style>
  /* Fondo solo para esta página */
  .track-bg {
    background: linear-gradient(135deg, #f6f7fb 0%, #eef1f6 100%);
    padding: 40px 0;
  }

  .card-elegante {
    border-radius: 1.2rem;
    border: none;
    background: #ffffff;
    box-shadow: 0px 8px 22px rgba(0, 0, 0, 0.05);
    transition: transform 0.2s ease;
  }

  .card-elegante:hover {
    transform: translateY(-2px);
  }

  .titulo-principal {
    font-size: 2.4rem;
    font-weight: 700;
    text-align: center;
  }

  .texto-secundario {
    text-align: center;
    max-width: 650px;
    margin: 0 auto;
    color: #6c757d;
    font-size: 1rem;
  }

  .fade-in {
    animation: fadeIn 0.6s ease forwards;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .btn-primary-custom {
    background-color: #4a6cf7;
    border-color: #4a6cf7;
    font-weight: 600;
    border-radius: 0.8rem;
    padding: 0.6rem 1.2rem;
  }

  .btn-primary-custom:hover {
    background-color: #3e5bdd;
    border-color: #3e5bdd;
  }

  .btn-outline-custom {
    border-radius: 0.8rem;
    border-color: #4a6cf7;
    color: #4a6cf7;
    font-weight: 600;
  }

  .btn-outline-custom:hover {
    background-color: #4a6cf7;
    color: #ffffff;
  }

</style>


<div class="track-bg">

<div class="container py-4">

    <!-- TÍTULO -->
    <h1 class="titulo-principal mb-2">Rastrear mi pedido</h1>
    <p class="texto-secundario mb-5">
        Ingresa el código que recibiste al finalizar tu compra para ver tu estado de envío.
    </p>


    <!-- FORMULARIO -->
    <div class="row justify-content-center mb-4 fade-in">
        <div class="col-lg-7">
            <div class="card card-elegante p-4">

                <form method="post" action="{% url 'trackear_pedido' %}">
                    {% csrf_token %}

                    <div class="mb-3">
                        <label class="fw-semibold">Código de pedido</label>
                        <input type="text"
                               id="codigo"
                               name="codigo"
                               class="form-control form-control-lg"
                               placeholder="Ejemplo: PW-20251126-0D65"
                               value="{{ codigo|default_if_none:'' }}"
                               required>
                    </div>

                    <div class="d-grid">
                        <button class="btn btn-primary-custom btn-lg">
                            Buscar pedido
                        </button>
                    </div>

                </form>
            </div>
        </div>
    </div>


    <!-- RESULTADO -->
    {% if pedido %}
    <div class="row justify-content-center fade-in">
        <div class="col-lg-7">
            <div class="card card-elegante p-4">

                <h4 class="fw-bold mb-3">
                    Resultado para: <span class="text-primary">{{ pedido.codigo }}</span>
                </h4>

                <p><strong>Nombre:</strong> {{ pedido.nombre_completo }}</p>
                <p><strong>Estado del pedido:</strong> {{ pedido.get_estado_pedido_display }}</p>
                <p><strong>Total:</strong> ${{ pedido.total }}</p>
                <p><strong>Fecha del pedido:</strong> {{ pedido.creado_en|date:"d/m/Y H:i" }}</p>

                <div class="mt-3 d-flex flex-wrap gap-2">
                    <a href="{% url 'detalle_pedido' pedido.id %}" class="btn btn-primary-custom btn-sm">
                        Ver detalle del pedido
                    </a>

                    <a href="{% url 'lista_productos' %}" class="btn btn-outline-custom btn-sm">
                        Seguir comprando
                    </a>
                </div>

            </div>
        </div>
    </div>
    {% endif %}

</div>

</div>

{% endblock %}